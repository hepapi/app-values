replicaCount: 1

image:
  repository: my-nexus-repository-manager.nexus.svc.cluster.local:8082/repository/nexusimagerepository/frontend-dev
  tag: managed-by-jenkins
  pullPolicy: IfNotPresent

imagePullSecrets:
  - name: nexus-regcred

nameOverride: "frontend"
fullnameOverride: "frontend"

serviceAccount:
  create: true
  annotations: {}
  name: "frontend"

podAnnotations: 
  sidecar.istio.io/rewriteAppHTTPProbers: "true"
  instrumentation.opentelemetry.io/inject-go: monitoring/go-instrumentation

podSecurityContext: 
  fsGroup: 1000
  runAsGroup: 1000
  runAsNonRoot: true
  runAsUser: 1000

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  privileged: false
  capabilities:
    drop:
      - ALL


service:
  type: ClusterIP
  port: 80
  targetPort: 8080



  livenessProbe:
      enabled: true
      path: "/_healthz"
      port: 8080
      initialDelaySeconds: 10
      periodSeconds: 15
      timeoutSeconds: 3
      failureThreshold: 3

    # HTTP Readiness
  readinessProbe:
    enabled: true
    path: "/_healthz"
    port: 8080
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3


  # gRPC probe toggle
  grpcProbe:
    enabled: false
    port: 8080

    # LIVENESS
    initialDelaySeconds: 20
    periodSeconds: 15

    # READINESS 
    readinessInitialDelaySeconds: 20
    readinessPeriodSeconds: 15




ingress:
  enabled: true
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
  ingressClassName: "nginx"
  pathType: Prefix
  activeService: true
  hosts:
    - host: frontend.hepapi.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: frontend-hepapi-tls
      hosts:
        - frontend.hepapi.com

resources:
  limits:
    cpu: 300m
    memory: 300Mi
  # requests:
  #   cpu: 100m
  #   memory: 256Mi

autoscaling:
  enabled: false
  minReplicas: 3
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

# nodeSelector:
#   project: petclinic

tolerations: []
affinity: {}

extraConfigMap: null


env:
  - name: PORT
    value: "8080"
  - name: PRODUCT_CATALOG_SERVICE_ADDR
    value: "productcatalogservice:3550"
  - name: CURRENCY_SERVICE_ADDR
    value: "currencyservice:7000"
  - name: CART_SERVICE_ADDR
    value: "cartservice:7070"
  - name: RECOMMENDATION_SERVICE_ADDR
    value: "recommendationservice:8080"
  - name: SHIPPING_SERVICE_ADDR
    value: "shippingservice:50051"
  - name: CHECKOUT_SERVICE_ADDR
    value: "checkoutservice:5050"
  - name: AD_SERVICE_ADDR
    value: "adservice:9555"
  - name: SHOPPING_ASSISTANT_SERVICE_ADDR
    value: "shoppingassistantservice:80"
  - name: ENABLE_PROFILER
    value: "0"

  # - name: ENV_PLATFORM
  #   value: "aws"

  # - name: CYMBAL_BRANDING
  #   value: "true"

  # - name: ENABLE_ASSISTANT
  #   value: "true"

  # - name: FRONTEND_MESSAGE
  #   value: "Replace this with a message you want to display on all pages."

  # - name: PACKAGING_SERVICE_URL
  #   value: ""  # Ã¶rn: "http://123.123.123"

